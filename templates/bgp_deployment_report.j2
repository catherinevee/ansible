BGP Deployment Report
====================

Device Information:
------------------
Device: {{ bgp_deployment_data.device }}
Deployment Timestamp: {{ bgp_deployment_data.timestamp }}

BGP Global Configuration:
------------------------
{% if bgp_deployment_data.bgp_global.changed is defined %}
BGP Global Changes: {{ 'Yes' if bgp_deployment_data.bgp_global.changed else 'No' }}
{% endif %}

{% if bgp_config is defined %}
Local ASN: {{ bgp_config.local_asn }}
Router ID: {{ bgp_config.router_id }}
{% endif %}

BGP Neighbors:
-------------
{% if bgp_neighbors is defined %}
{% for neighbor in bgp_neighbors %}
Neighbor: {{ neighbor.peer_ip }}
  - Remote ASN: {{ neighbor.peer_asn }}
  - Description: {{ neighbor.description }}
  - Status: Configured
{% endfor %}
{% else %}
No BGP neighbors configured
{% endif %}

Advertised Networks:
-------------------
{% if bgp_config.networks_to_advertise is defined %}
{% for network in bgp_config.networks_to_advertise %}
Network: {{ network.network }}/{{ network.mask }}
{% endfor %}
{% else %}
No networks advertised
{% endif %}

BGP Status Verification:
-----------------------
{% if bgp_deployment_data.bgp_status.stdout is defined %}
{{ bgp_deployment_data.bgp_status.stdout[0] | default('Status information not available') }}
{% else %}
BGP status verification not performed
{% endif %}

Configuration Summary:
---------------------
{% if bgp_deployment_data.bgp_global.changed is defined %}
- Global BGP configuration: {{ 'Modified' if bgp_deployment_data.bgp_global.changed else 'No changes' }}
{% endif %}
{% if bgp_deployment_data.bgp_neighbors.changed is defined %}
- BGP neighbors: {{ 'Modified' if bgp_deployment_data.bgp_neighbors.changed else 'No changes' }}
{% endif %}

Deployment Notes:
----------------
- All BGP configurations are idempotent
- Changes only applied where necessary
- Verify BGP neighbor establishment manually
- Monitor BGP convergence time
- Check routing table for advertised prefixes

Generated by: Ansible Network Automation Framework
Report Template Version: 1.0
