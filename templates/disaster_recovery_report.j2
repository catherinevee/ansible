Network Disaster Recovery Operation Report
===========================================

Device Information:
------------------
Device Name: {{ dr_data.device }}
Operation Type: {{ dr_data.operation | upper }}
Timestamp: {{ dr_data.timestamp }}
Report Generated: {{ ansible_date_time.iso8601 }}

Operation Summary:
-----------------
{% if dr_data.operation == 'backup' %}
BACKUP OPERATION COMPLETED
- Configuration backup status: {{ 'SUCCESS' if dr_data.backup_result.backup_path is defined else 'FAILED' }}
{% if dr_data.backup_result.backup_path is defined %}
- Backup file location: {{ dr_data.backup_result.backup_path }}
- Backup file size: {{ dr_data.backup_result.backup_path | filesize if dr_data.backup_result.backup_path is defined else 'Unknown' }}
{% endif %}
- Additional data collected: Version info, inventory, running/startup configs

{% elif dr_data.operation == 'restore' %}
RESTORE OPERATION COMPLETED
- Configuration restore status: {{ 'SUCCESS' if dr_data.restore_result.changed is defined else 'FAILED' }}
{% if dr_data.restore_result.changed is defined %}
- Configuration changes applied: {{ 'YES' if dr_data.restore_result.changed else 'NO CHANGES NEEDED' }}
- Restore method: {{ dr_data.restore_result.method | default('Full configuration replacement') }}
{% endif %}
- Pre-restore backup created: YES (rollback capability available)

{% elif dr_data.operation == 'failover' %}
FAILOVER OPERATION COMPLETED
- Failover status: {{ 'SUCCESS' if dr_data.failover_result is defined else 'FAILED' }}
- HSRP/VRRP priority adjustment: COMPLETED
- Routing protocol convergence: INITIATED
- Expected convergence time: 2-5 minutes

{% elif dr_data.operation == 'test' %}
DISASTER RECOVERY TEST COMPLETED
- Overall test status: {{ 'PASSED' if dr_data.connectivity_test.failed is not defined else 'FAILED' }}
{% endif %}

Connectivity Test Results:
-------------------------
{% if dr_data.connectivity_test.results is defined %}
{% for test in dr_data.connectivity_test.results %}
Target: {{ test.item }}
Status: {{ 'REACHABLE' if test.status == 200 else 'UNREACHABLE' }}
Response Time: {{ test.elapsed | default('N/A') }}s
{% endfor %}
{% else %}
No connectivity tests performed for this operation type
{% endif %}

Service Availability Tests:
--------------------------
{% if dr_data.service_test.results is defined %}
{% for service in dr_data.service_test.results %}
Service: {{ service.item.host }}:{{ service.item.port }}
Status: {{ 'AVAILABLE' if not service.failed else 'UNAVAILABLE' }}
Response Time: {{ service.elapsed | default('N/A') }}s
{% endfor %}
{% else %}
No service availability tests performed
{% endif %}

Recovery Validation:
-------------------
{% if dr_data.operation in ['restore', 'failover'] %}
Network Convergence: COMPLETED (2 minute wait period)
Routing Table Status: CONVERGED
End-to-End Connectivity: {{ 'VERIFIED' if dr_data.ping_test is defined else 'PENDING VALIDATION' }}
Critical Applications: {{ 'ACCESSIBLE' if dr_data.app_validation is defined else 'REQUIRES VALIDATION' }}
{% endif %}

Recommended Actions:
-------------------
{% if dr_data.operation == 'backup' %}
1. Verify backup file integrity
2. Test restore procedure in lab environment
3. Document configuration changes since last backup
4. Schedule regular backup automation

{% elif dr_data.operation == 'restore' %}
1. Validate all network services are operational
2. Perform comprehensive connectivity testing
3. Monitor system logs for any anomalies
4. Update documentation with restore details

{% elif dr_data.operation == 'failover' %}
1. Monitor active/standby status of redundant systems
2. Verify load balancing is functioning correctly
3. Test failback procedures when primary systems recover
4. Document failover timeline and impact

{% elif dr_data.operation == 'test' %}
1. Address any connectivity failures identified
2. Update DR procedures based on test results
3. Schedule next DR test (recommended: quarterly)
4. Train staff on DR procedures
{% endif %}

Critical Considerations:
-----------------------
- Backup files contain sensitive configuration data - store securely
- Test restore procedures regularly in isolated environment
- Maintain current network topology documentation
- Ensure all team members understand DR procedures
- Monitor system performance post-DR operations

Next Steps:
----------
1. Review this report with network operations team
2. Update DR runbooks with any lessons learned
3. Schedule follow-up testing as appropriate
4. File report in compliance documentation system

=== END OF REPORT ===

Report Location: {{ playbook_dir }}/../reports/
For questions about this report, contact the Network Operations team.
Generated by Ansible Network Automation System
